SET search_path TO "0001";
-- COMMON MODULE SCHEMA DATA SCRIPT

-- USERS PRIVILEGES

INSERT INTO "Privilege" ("OID_USER", "OID_ITEM", "READ", "CREATE", "MODIFY", "DELETE") 
	SELECT u."OID", i."OID", FALSE, FALSE, FALSE, FALSE 
	FROM "COMMON"."User" AS u, "COMMON"."SecureItem" AS i
	WHERE (u."OID", i."OID") NOT IN (SELECT "OID_USER", "OID_ITEM" FROM "Privilege");
	
UPDATE "Privilege" SET "READ" = TRUE, "CREATE" = TRUE, "MODIFY" = TRUE, "DELETE" = TRUE 
FROM "Privilege" AS PV
INNER JOIN "COMMON"."SecureItem" AS SI ON SI."OID" = PV."OID_ITEM"
INNER JOIN "COMMON"."User" AS US ON US."OID" = PV."OID_USER"
WHERE ("Privilege"."OID" = PV."OID" AND US."NAME" = 'molservice' AND SI."TIPO" = '003' );
	
INSERT INTO "Setting" ("NAME", "VALUE") VALUES ('N_DIGITOS_CUENTAS_CONTABLES', '10');
	
INSERT INTO "CMGrant" ("SERIAL", "CODIGO", "ESTADO", "NOMBRE") VALUES (1, '001', 10, 'REA');
INSERT INTO "CMGrant" ("SERIAL", "CODIGO", "ESTADO", "NOMBRE") VALUES (2, '002', 10, 'POSEI');
INSERT INTO "CMGrant" ("SERIAL", "CODIGO", "ESTADO", "NOMBRE") VALUES (3, '003', 10, 'FOMENTO');

INSERT INTO "CMGrantPeriod" ("OID_AYUDA", "ESTADO", "TIPO_DESCUENTO", "PORCENTAJE", "CANTIDAD", "FECHA_INI", "FECHA_FIN") VALUES (3, 10, 2, 50, 0, '2011/01/01', '2011/01/31');
INSERT INTO "CMGrantPeriod" ("OID_AYUDA", "ESTADO", "TIPO_DESCUENTO", "PORCENTAJE", "CANTIDAD", "FECHA_INI", "FECHA_FIN") VALUES (3, 10, 2, 50, 0, '2012/01/01', '2012/01/31');