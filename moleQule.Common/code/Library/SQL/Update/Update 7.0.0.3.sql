/* UPDATE 7.0.0.3*/

SET SEARCH_PATH = "COMMON";

UPDATE "Variable" SET "VALUE" = '7.0.0.3' WHERE "NAME" = 'COMMON_DB_VERSION';

SET SEARCH_PATH = "0001";

DROP TABLE IF EXISTS "CMMonitor" CASCADE;
CREATE TABLE "CMMonitor"
(
  "OID" bigint,
  "STATUS" bigint DEFAULT 0,
  "COMPONENT_TYPE" bigint,
  "COMPONENT_SERIAL" text,
  "COMPONENT_NAME" text,
  "COMPONENT_IP" text,
  "COMPONENT_INTERVAL" bigint,
  "COMPONENT_STATUS" bigint DEFAULT 0,
  "ERROR_TYPE" bigint DEFAULT 0,
  "ERROR_LEVEL" bigint DEFAULT 0,
  "DESCRIPTION" bigint DEFAULT 0,
  "LAST_UPDATE" timestamp without time zone,
  CONSTRAINT "PK_CMMonitor" PRIMARY KEY ("OID")
)WITHOUT OIDS;

ALTER TABLE "CMMonitor" OWNER TO moladmin;
GRANT ALL ON TABLE "CMMonitor" TO GROUP "MOLEQULE_ADMINISTRATOR";

CREATE SEQUENCE "CMMonitor_OID_seq"
  INCREMENT 1
  MINVALUE 1
  MAXVALUE 9223372036854775807
  START 1
  CACHE 1;
ALTER TABLE "CMMonitor_OID_seq"
  OWNER TO moladmin;
GRANT ALL ON TABLE "0001"."CMMonitor_OID_seq" TO moladmin;
GRANT ALL ON TABLE "0001"."CMMonitor_OID_seq" TO "MOLEQULE_ADMINISTRATOR";

ALTER TABLE "CMMonitor"
   ALTER COLUMN "OID" SET DEFAULT nextval('"0001"."CMMonitor_OID_seq"'::regclass);

ALTER TABLE "CMMonitor" DROP  COLUMN "COMPONENT_TYPE";
ALTER TABLE "CMMonitor" ADD COLUMN "COMPONENT_TYPE" bigint DEFAULT 0;

ALTER TABLE "CMMonitor" DROP  COLUMN "COMPONENT_INTERVAL";
ALTER TABLE "CMMonitor" ADD COLUMN "COMPONENT_INTERVAL" bigint DEFAULT 0;

ALTER TABLE "CMMonitor" DROP  COLUMN "DESCRIPTION";
ALTER TABLE "CMMonitor" ADD COLUMN "DESCRIPTION" text;