/* UPDATE 2.5.0.0*/

SET SEARCH_PATH = "COMMON";

ALTER TABLE "CUENTA_BANCARIA" ADD COLUMN "CUENTA_CONTABLE" text;
ALTER TABLE "CUENTA_BANCARIA" ADD COLUMN "CUENTA_CONTABLE_GASTOS" text;

CREATE TABLE "TarjetaCredito" ( 
	"OID" bigserial NOT NULL,
	"OID_CUENTA_BANCARIA" bigint NOT NULL,
	"NOMBRE" varchar(255) UNIQUE,
	"NUMERACION" varchar(255) UNIQUE,
	"CUENTA_CONTABLE" varchar(255),
	"OBSERVACIONES" text,
	"TIPO" bigint DEFAULT 1,
	CONSTRAINT "PK_TarjetaCredito" PRIMARY KEY ("OID")
) WITHOUT OIDS;

ALTER TABLE "TarjetaCredito" OWNER TO moladmin;
GRANT ALL ON TABLE "TarjetaCredito" TO GROUP "MOLEQULE_ADMINISTRATOR";

CREATE TABLE "TPV" ( 
	"OID" bigserial NOT NULL,
	"OID_CUENTA_BANCARIA" bigint NOT NULL,
	"NOMBRE" varchar(255) UNIQUE,
	"CUENTA_CONTABLE" varchar(255),
	"OBSERVACIONES" text,
	CONSTRAINT "PK_TPV" PRIMARY KEY ("OID")
) WITHOUT OIDS;

ALTER TABLE "TPV" OWNER TO moladmin;
GRANT ALL ON TABLE "TPV" TO GROUP "MOLEQULE_ADMINISTRATOR";

CREATE TABLE "Impuesto" ( 
	"OID" bigserial NOT NULL,
	"NOMBRE" varchar(255) UNIQUE,
	"PORCENTAJE" decimal(10,2) DEFAULT 0,
	"CUENTA_CONTABLE_REPERCUTIDO" varchar(255),
	"CUENTA_CONTABLE_SOPORTADO" varchar(255),
	"OBSERVACIONES" text,
	CONSTRAINT "PK_Impuesto" PRIMARY KEY ("OID")
) WITHOUT OIDS;

ALTER TABLE "Impuesto" OWNER TO moladmin;
GRANT ALL ON TABLE "Impuesto" TO GROUP "MOLEQULE_ADMINISTRATOR";

ALTER TABLE "TarjetaCredito" ADD CONSTRAINT "FK_TarjetaCredito_CuentaBancaria" FOREIGN KEY ("OID_CUENTA_BANCARIA") REFERENCES "COMMON"."CUENTA_BANCARIA" ("OID")ON UPDATE CASCADE ON DELETE RESTRICT;
ALTER TABLE "TPV" ADD CONSTRAINT "FK_TPV_CuentaBancaria" FOREIGN KEY ("OID_CUENTA_BANCARIA") REFERENCES "COMMON"."CUENTA_BANCARIA" ("OID")ON UPDATE CASCADE ON DELETE RESTRICT;

SET SEARCH_PATH = "0001";

